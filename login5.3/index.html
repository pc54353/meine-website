<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sicheres Login</title>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0e0e0e;
      overflow: hidden;
      color: white;
    }

    .modal-overlay {
      position: fixed;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      animation: fadeIn 0.6s ease forwards;
    }

    .modal {
      background: #1a1a1a;
      border-radius: 15px;
      width: 90%;
      max-width: 400px;
      padding: 30px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
      animation: slideIn 0.6s ease forwards;
      color: white;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from {
        background: rgba(0, 0, 0, 0);
      }
      to {
        background: rgba(0, 0, 0, 0.8);
      }
    }

    .tabs {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .tabs button {
      flex: 1;
      padding: 10px;
      border: none;
      background: #333;
      color: #ccc;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .tabs button.active {
      background: #555;
      color: white;
    }

    form {
      display: none;
      flex-direction: column;
    }

    form.active {
      display: flex;
    }

    input {
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #555;
      background: #222;
      color: white;
    }

    button.submit {
      padding: 12px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button.submit:hover {
      background: #218838;
    }

    .google-btn {
      margin-top: 10px;
      background: #db4437;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .google-btn:hover {
      background: #c33d2e;
    }

    #main-content {
      display: none;
      animation: fadeInMain 1s ease forwards;
      padding: 40px;
      text-align: center;
      color: white;
    }

    @keyframes fadeInMain {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  </style>
</head>
<body>

<!-- MODAL -->
<div class="modal-overlay" id="loginModal">
  <div class="modal">
    <div class="tabs">
      <button id="loginTab" class="active" onclick="showForm('login')">Login</button>
      <button id="registerTab" onclick="showForm('register')">Registrieren</button>
    </div>

    <form id="loginForm" class="active" onsubmit="handleLogin(event)">
      <input type="text" placeholder="Benutzername" required />
      <input type="password" id="loginPassword" placeholder="Passwort" required />
      <button class="submit" type="submit">Einloggen</button>
      <button class="google-btn" type="button" onclick="loginWithGoogle()">Mit Google anmelden</button>
    </form>

    <form id="registerForm" onsubmit="handleRegister(event)">
      <input type="text" placeholder="Benutzername" required />
      <input type="email" placeholder="E-Mail" required />
      <input type="password" id="registerPassword" placeholder="Passwort" required />
      <button class="submit" type="submit">Registrieren</button>
      <button class="google-btn" type="button" onclick="loginWithGoogle()">Mit Google registrieren</button>
    </form>
  </div>
</div>

<!-- HAUPTINHALT -->
<div id="main-content">
  <h1>Willkommen auf der sicheren Seite!</h1>
  <p>Du bist jetzt eingeloggt. üîê</p>
</div>

<!-- SHA-256 Hashing & Logik -->
<script>
  async function hashPassword(password) {
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
    return hashHex;
  }

  function showForm(type) {
    document.getElementById("loginForm").classList.remove("active");
    document.getElementById("registerForm").classList.remove("active");
    document.getElementById("loginTab").classList.remove("active");
    document.getElementById("registerTab").classList.remove("active");

    if (type === "login") {
      document.getElementById("loginForm").classList.add("active");
      document.getElementById("loginTab").classList.add("active");
    } else {
      document.getElementById("registerForm").classList.add("active");
      document.getElementById("registerTab").classList.add("active");
    }
  }

  async function handleLogin(event) {
    event.preventDefault();
    const password = document.getElementById("loginPassword").value;
    const hashed = await hashPassword(password);
    console.log("Login SHA-256 Hash:", hashed);
    closeModal();
  }

  async function handleRegister(event) {
    event.preventDefault();
    const password = document.getElementById("registerPassword").value;
    const hashed = await hashPassword(password);
    console.log("Registrierungs-Hash:", hashed);
    closeModal();
  }

  function loginWithGoogle() {
    alert("Google Login ist als Platzhalter eingebaut.");
    closeModal();
  }

  function closeModal() {
    const modal = document.getElementById("loginModal");
    modal.style.animation = "fadeOut 0.5s ease forwards";
    setTimeout(() => {
      modal.style.display = "none";
      document.getElementById("main-content").style.display = "block";
    }, 500);
  }
</script>

</body>
</html>
